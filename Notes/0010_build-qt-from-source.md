I got a message that suggested that I was sharing something across threads.

### Notes

-   The following message got my attention:

    ```none
    QObject::setParent: Cannot set parent, new parent is in a different thread
    ```

-   I am building Qt from source as follows:

    ```none
    ./configure \
        --prefix=/home/me/.local/lib/custom-qt \
        --debug
        
    cmake --build . --parallel
    
    cmake --install .
    ```

-   I added the following line in my `CMakeLists.txt` file:

    ```cmake
    # FIXME: This is only for debugging.
    set(CMAKE_PREFIX_PATH "/home/me/.local/lib/custom-qt")    
    ```

-   I Was able to get a backtrace:

    ```none
    #0  0x00007ffff4aa164c in  () at /usr/lib/libc.so.6
    #1  0x00007ffff4a51958 in raise () at /usr/lib/libc.so.6
    #2  0x00007ffff4a3b53d in abort () at /usr/lib/libc.so.6
    #3  0x00007ffff56bb7da in qAbort() () at /home/me/src/github.com/qt/qtbase/src/corelib/global/qglobal.cpp:160
    #4  0x00007ffff56ca784 in qt_message_fatal(QtMsgType, QMessageLogContext const&, QString const&) (context=..., message=...) at /home/me/src/github.com/qt/qtbase/src/corelib/global/qlogging.cpp:1946
    #5  0x00007ffff56c6c48 in QMessageLogger::fatal(char const*, ...) const (this=0x7fffaae9c370, msg=0x7ffff5ba9620 "ASSERT failure in %s: \"%s\", file %s, line %d") at /home/me/src/github.com/qt/qtbase/src/corelib/global/qlogging.cpp:880
    #6  0x00007ffff56b9100 in qt_assert_x(char const*, char const*, char const*, int) (where=0x7ffff5bc7cad "Q_UNREACHABLE()", what=0x7ffff5bc7c93 "Q_UNREACHABLE was reached", file=0x7ffff5bc7278 "/home/me/src/github.com/qt/qtbase/src/corelib/kernel/qobject.cpp", line=2216) at /home/me/src/github.com/qt/qtbase/src/corelib/global/qassert.cpp:77
    #7  0x00007ffff57ec465 in QObjectPrivate::setParent_helper(QObject*) (this=0x7fffa00013b0, o=0x555555cd02a0) at /home/me/src/github.com/qt/qtbase/src/corelib/kernel/qobject.cpp:2216
    #8  0x00007ffff57ebef6 in QObject::setParent(QObject*) (this=0x7fffa0001320, parent=0x555555cd02a0) at /home/me/src/github.com/qt/qtbase/src/corelib/kernel/qobject.cpp:2148
    #9  0x00005555555797c9 in Accounting::Models::TransactionListModel::appendTransaction(Accounting::Models::TransactionModel*) ()
    #10 0x000055555557b44f in Accounting::Models::DatabaseModel::deserialize(Accounting::Persistance::Database const&) ()
    #11 0x0000555555586ac5 in Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}::operator()() const ()
    #12 0x00005555555b39f6 in Accounting::ResultEnum std::__invoke_impl<Accounting::ResultEnum, Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}>(std::__invoke_other, Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}&&) ()
    #13 0x00005555555b3824 in std::__invoke_result<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}>::type std::__invoke<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}>(Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}&&) ()
    #14 0x00005555555b35ce in Accounting::ResultEnum std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) ()
    #15 0x00005555555b33f6 in std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >::operator()() ()
    #16 0x00005555555b2cec in std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::operator()() const ()
    #17 0x00005555555b2191 in std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter> std::__invoke_impl<std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>&>(std::__invoke_other, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>&) ()
    #18 0x00005555555b1867 in std::enable_if<is_invocable_r_v<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>&>, std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> >::type std::__invoke_r<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>&>(std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>&) ()
    #19 0x00005555555b09f2 in std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<Accounting::ResultEnum>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum> >::_M_invoke(std::_Any_data const&) ()
    #20 0x000055555558b694 in std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const ()
    #21 0x000055555557e38a in std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) ()
    #22 0x000055555559acdb in void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) ()
    #23 0x000055555559414d in std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) ()
    #24 0x000055555558b44a in std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::{lambda()#1}::operator()() const ()
    #25 0x0000555555594181 in std::once_flag::_Prepare_execution::_Prepare_execution<std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::{lambda()#1}>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::{lambda()#1}::operator()() const ()
    #26 0x0000555555594192 in std::once_flag::_Prepare_execution::_Prepare_execution<std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&)::{lambda()#1}>(void (std::__future_base::_State_baseV2::*&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*))::{lambda()#1}::_FUN() ()
    #27 0x00007ffff4aa4887 in  () at /usr/lib/libc.so.6
    #28 0x000055555556f676 in __gthread_once(int*, void (*)()) ()
    #29 0x000055555558b4cb in void std::call_once<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::once_flag&, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) ()
    #30 0x000055555557e168 in std::__future_base::_State_baseV2::_M_set_result(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>, bool) ()
    #31 0x00005555555ae24a in std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::_M_run() ()
    #32 0x00005555555b7ccd in void std::__invoke_impl<void, void (std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::*)(), std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>*>(std::__invoke_memfun_deref, void (std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::*&&)(), std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>*&&) ()
    #33 0x00005555555b7786 in std::__invoke_result<void (std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::*)(), std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>*>::type std::__invoke<void (std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::*)(), std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>*>(void (std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::*&&)(), std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>*&&) ()
    #34 0x00005555555b7299 in void std::thread::_Invoker<std::tuple<void (std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::*)(), std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) ()
    #35 0x00005555555b6de2 in std::thread::_Invoker<std::tuple<void (std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::*)(), std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>*> >::operator()() ()
    #36 0x00005555555b4ae2 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>::*)(), std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<Accounting::MainWindow::load_database_from_disk()::{lambda()#1}::operator()() const::{lambda()#1}> >, Accounting::ResultEnum>*> > >::_M_run() ()
    #37 0x00007ffff4cd62f3 in std::execute_native_thread_routine(void*) (__p=0x7fff9c000bf0) at /usr/src/debug/gcc/libstdc++-v3/src/c++11/thread.cc:82
    #38 0x00007ffff4a9f8fd in  () at /usr/lib/libc.so.6
    #39 0x00007ffff4b21a60 in  () at /usr/lib/libc.so.6    
    ```

-   My understanding is, that we are deserializing in a worker thread and then creating fancy `QObject` objects which are feed into the models.

-   I was able to resolve the issue by introducing another custom event that is emitted when the database has been loaded.
